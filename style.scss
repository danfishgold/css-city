// https://codepen.io/johan/pen/yGDoI

@use 'sass:math';
@use 'single-div';

body,
html {
  height: 100%;
  display: grid;
  background: coral;
}

$cell-wd: 8px;
$cell-ht: 8px;
$rows: 16;
$cols: 16;
$gap: 12px;

main {
  margin: auto;
  transform: rotateX(45deg) rotateZ(45deg);
  transform-style: preserve-3d;

  display: grid;
  grid-template-rows: repeat($rows, $cell-ht);
  grid-template-columns: repeat($cols, $cell-wd);
  row-gap: $gap;
  column-gap: $gap;
  grid-auto-flow: dense;
}

@for $i from 1 through 20 {
  .cube:nth-child(#{$i}) {
    $cells-wide: 1 + random(4);
    $cells-tall: 1 + random(4);

    @if random(10) <= 4 {
      width: 100%;
      height: 100%;
      background: paleturquoise;
      // border: 1px solid black;
    } @else {
      $height: 20px + random(3) * random(100) * 1px;

      @include single-div.cube(
        $cells-tall * $cell-ht + ($cells-tall - 1) * $gap,
        $cells-wide * $cell-wd + ($cells-wide - 1) * $gap,
        $height
      );
    }

    grid-row: span $cells-tall;
    grid-column: span $cells-wide;
  }
}

// @for $i from 1 through 20 {
//   .cube:nth-child(#{$i}) {
//     position: relative;
//     $cells-wide: 2 + random(5);
//     $cells-tall: 2 + random(5);

//     @if random(10) <= 4 {
//       .cubez {
//         width: 100%;
//         height: 100%;
//         background: white;
//         border: 1px solid black;
//       }
//       .cubex,
//       .cubey {
//         display: none;
//       }
//     } @else {
//       $height: 20px + random(100) * 1px;
//       @include cube(
//         $cells-tall * $cell-ht + ($cells-tall - 1) * $gap,
//         $cells-wide * $cell-wd + ($cells-wide - 1) * $gap,
//         $height
//       );
//     }

//     grid-row: span $cells-tall;
//     grid-column: span $cells-wide;
//   }
// }
